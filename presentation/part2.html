<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv='cache-control' content='no-cache'>
    <meta http-equiv='expires' content='0'>
    <meta http-equiv='pragma' content='no-cache'>

    <script>
        // Check if the site is being served from GitHub Pages
        if (window.location.hostname === "viniciusmgn.github.io") {
            document.write('<base href="/aulas_manipuladores/">');
        } else {
            document.write('<base href="/">');  // Local development base
        }
    </script>

    <title>Part 2 - Geometry in Robotics</title>

    <link rel="stylesheet" href="presentation/dist/reset.css">
    <link rel="stylesheet" href="presentation/dist/reveal.css">
    <link rel="stylesheet" href="presentation/dist/theme/black.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="presentation/plugin/highlight/monokai.css">
    <style>
        .reveal .slides section {
            padding: 1.5rem;
            /* Adjust the value as needed */
        }
    </style>
</head>

<body>
    <div class="reveal">
        <div class="slides">


            <section
                style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;">
                <h3 style="font-size: 3.5vw; margin-bottom: 0.5rem;">Constrained Robotic Control</h3>
                <h3 style="font-size: 2.5vw; margin-bottom: 1rem;">Part 2: Geometry in Robotics</h3>

                <div style="display: flex; flex-direction: column; align-items: center;">
                    <img src="presentation/images/part2/main.png" style="max-width: 40%; height: auto;">
                    <small style="font-size: 1.5vw; margin-top: 0.5rem;">Vinicius Mariano Gon√ßalves</small>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    GEOMETRY IN ROBOTICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">INTRODUCTION</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.5vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> In this part, we will learn how to represent the environment and the robot geometrically, as well as how 
                                to compute distances (and associated quantities);
                            </li><br>
                            <li>This is useful to model and implement many control constraints, as obstacle avoidance between the robot and 
                                the environment;
                            <br>
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/main.png"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>

            <section
                style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;">
                <h3 style="font-size: 3.5vw; margin-bottom: 0.5rem;">REPRESENTING THE ROBOT AND THE ENVIRONMENT</h3>

                <div style="display: flex; flex-direction: column; align-items: center;">
                    <img src="presentation/images/part2/main.png" style="max-width: 40%; height: auto;">
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    REPRESENTING THE ROBOT AND THE ENVIRONMENT
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">WAYS TO MODEL GEOMETRY</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.5vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> In robotics, we need to represent the geometry of the <b class="itext">robot and environment</b> 
                                that is convenient to do calculations (like computing distance);
                            </li><br>
                            <li>Three main ways:  <br><br>
                                <ul>
                                    <li><b class="itext">Convex shapes;</b></li><br>
                                    <li><b class="itext">Point clouds;</b></li><br>
                                    <li><b class="itext">Meshes;</b></li><br>
                                </ul>
                            <br>
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/main.png"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    REPRESENTING THE ROBOT AND THE ENVIRONMENT
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">CONVEX SHAPES</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.5vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> <b class="itext">Convex shapes</b> (i.e., if two points are in the shape, so is the line between them)
                                is the simplest way to represent geometry;
                            </li><br>
                            <li> More complex shapes (like non-convex ones) can be broken into simple convex shapes;
                            </li><br>
                            <li><b class="itext">Pros: </b> Simple and fast to do calculations;</li><br>
                            <li><b class="itext">Cons: </b> It may be time-consuming to break a complex shape into simple convex shapes. 
                            Specially if this needs to be done in real time;</li><br>
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <iframe src="presentation/images/part2/part_2_1.html" width="550" height="580"
                            style="border: none;"></iframe>
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    REPRESENTING THE ROBOT AND THE ENVIRONMENT
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">CONVEX SHAPES</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.5vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> Usually this used when you <b class="itext">know the geometry a priori</b>;
                            </li><br>
                            <li> For example, it is very reasonable to model the manipulator as convex geometries 
                                since you know its geometry beforehand;
                            </li><br>
                            <li>For the environment, this is the case, for example, of a warehouse in which the robots work. 
                                You know the geometry of the warehouse perfectly. You have the time to do all the pre-processing to 
                                decompose the parts into convex shapes;</li><br>
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <iframe src="presentation/images/part2/part_2_2.html" width="550" height="580"
                            style="border: none;"></iframe>
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    REPRESENTING THE ROBOT AND THE ENVIRONMENT
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">POINT CLOUD</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.5vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> <b class="itext">Point clouds</b> represent the object by a finite set of points \(p_i\);
                            </li><br>
                            <li><b class="itext">Pros: </b> Very flexible. Data can be obtained (almost) straight out of 
                                sensors;</li><br>
                            <li><b class="itext">Cons: </b> It may be time-consuming to make operations with them. 
                                Could be dozens of millions of points!</li><br>
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <div style="width: 100%">
                                <iframe src="presentation/images/part2/part_2_3.html" width="550" height="580"
                                style="border: none;"></iframe>
                            </div>
                            <div style="width: 100%">
                                <div style="font-size: 1.2vw; text-align: center; flex-shrink: 0; margin-bottom: 0rem;">
                                    Taken from:
                                </div>
                                <div style="font-size: 1.2vw; text-align: center; flex-shrink: 0; margin-bottom: 0rem;">
                                    <a href="https://free3d.com/3d-model/cat-v1--522281.html" target="_blank"
                                        style="font-size: 1.2vw;">
                                        <b class="hlink">https://free3d.com/3d-model/cat-v1--522281.html</b>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    REPRESENTING THE ROBOT AND THE ENVIRONMENT
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">POINT CLOUD</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.5vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> Laser-based sensors like RGBD (RGB+Depth) cameras or LiDAR (Light Detection and Ranging) can obtain these data;
                            </li><br>
                            <li> LiDAR are better for long range sensing, whereas RGBD for short range. LiDARs are more expensive;
                            </li><br>
                            <li> They need to be pre-processed too: sampling, noise reduction, etc... 
                                Some pre-processing can be also necessary to efficiently compute distance, as we will see;
                            </li><br>
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <div style="width: 100%">
                                <img src="presentation/images/part2/image1.svg"
                                    style="max-width: 80%; height: auto; max-height: 60vh;">
                            </div>
                            
                        </div>
                    </div>
                </div>
            </section>



            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    REPRESENTING THE ROBOT AND THE ENVIRONMENT
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">MESHES</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.5vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> <b class="itext">Meshes</b> represent the object by an union of small simple shapes (usually triangles);
                            </li><br>
                            <li> It is an in-between solution between convex shapes and point clouds;
                            </li><br>
                            <li><b class="itext">Pros: </b> Pretty generic, and can represent objects in a more compact way 
                                than point cloud (think flat surfaces);</li><br>
                            <li><b class="itext">Cons: </b> It can be complex and time consuming to decompose the environment 
                            into meshes, specially if we want real time;</li><br>
                            <li><b class="itext">Not discussed in this class, UAIBot has no support for it either!</b></li>
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <iframe src="presentation/images/part2/part_2_4.html" width="550" height="580"
                            style="border: none;"></iframe>
                        </div>
                        <div style="width: 100%">
                            <div style="font-size: 1.2vw; text-align: center; flex-shrink: 0; margin-bottom: 0rem;">
                                The famous Stanford Bunny.
                            </div>
                        </div>
                    </div>
                </div>
            </section>


            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    REPRESENTING THE ROBOT AND THE ENVIRONMENT
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">MODELING THE ROBOT</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.5vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> As it was said, modeling the robot with convex shapes is pretty reasonable;
                            </li><br>
                            <li> It works as follows: for each link \(i\) of the robot, we will select the shapes we 
                                want to use to cover this object. 
                                We will decompose the \(i^{th}\) link into 
                                \(k(i)\) convex objects. 
                            </li><br>
                            <li> Each one of these objects has its own frame, \(\mathcal{F}_{obj,k,i}\). On the other hand, the 
                                \(i^{th}\) link also has a frame attached to it. For example, we can use the 
                                \(i^{th}\) DH frame \(\mathcal{F}_{DHi}\).</li><br>
                                <li>    To complete the model, we just need to specify the 
                                <b class="itext">constant</b> transformations between \(\mathcal{F}_{DHi}\) and
                                \(\mathcal{F}_{obj,k,i}\). Lets call it \(T_{Obj,k,i}^{DHi}\).
                            </li><br>
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image2.svg"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    REPRESENTING THE ROBOT AND THE ENVIRONMENT
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">MODELING THE ROBOT</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.5vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> Then, later, we will need the updated HTM of the objects \(T_0^{obj,k,i}(q)\), with relation to a fixed frame 
                                \(\mathcal{F}_0\), that composes the robot given the 
                                configuration \(q\) of the manipulator;
                            </li><br>
                            <li> From forward kinematics, we have the transformation \(T_{0}^{DHi}(q)\). Thus, simply:
                                $$ T_0^{obj,k,i}(q) =  T_{0}^{DHi}(q)T_{DHi}^{obj,k,i}$$
                            </li><br>
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image2.svg"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    REPRESENTING THE ROBOT AND THE ENVIRONMENT
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">MODELING THE ROBOT</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.5vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> In UAIBot, you can fetch this modeling information from a robot as follows:
                                <br><br>
        <pre><code class="language-python" style="text-align:left">
import uaibot as ub

#Create the robot
robot = ub.Robot.create_kuka_kr5()

#If you change the configuration of the Robot
# (add a new animation frame), you need to manually update
#  the htm of the collision objects:
robot.add_ani_frame(t=0,q=[0.0,1.0,2.0,3.0,4.0,5.0,6.0])
robot.update_col_object(t=0)

#Loop the link for data
for link in robot.links:
    #Loop the data for collision objects
    for col_obj_data in link.col_objects:
        #The actual UAIBot object (ub.Box, ub.Cylinder, etc...)    
        obj = col_obj_data[0]
        #The **constant** transformation from the i-th DH frame 
        #to the object frame.
        htm_dh_obj = col_obj_data[1]
        #If you use obj.htm , you are going to get the current 
        #HTM  of the object with respect to the world frame, 
        #which  changes with the configuration 
        htm_0_obj = obj.htm                               
        
        

        </code></pre>

                            </li><br>
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <iframe src="presentation/images/part2/part_2_2.html" width="550" height="580"
                            style="border: none;"></iframe>
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    REPRESENTING THE ROBOT AND THE ENVIRONMENT
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">MODELING THE ROBOT</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.5vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> A common approach is to only use spheres to model the robot;</li><br>
                            <li> The tradeoff being that, although the number of total convex objects to cover the robot 
                                will increase, computing distances and other things with spheres is much simpler than using general convex shapes;</li><br>
                            <li>Is it worth it? It seems so. State-of-the-art motion planners as 
                                <a href="https://curobo.org/" target="_blank">
                                    <b class="hlink">cuRobo</b>
                                </a> and <a href="https://github.com/KavrakiLab/vamp" target="_blank">
                                <b class="hlink">VAMP</b></a> use sphere modeling;
                            </li><br>
                            <li>The jury is still out, though. I think sphere modeling can be beaten.  </li>
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <iframe src="presentation/images/part2/part_2_5.html" width="550" height="580"
                            style="border: none;"></iframe>
                        </div>
                    </div>
                </div>
            </section>

            <section
                style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;">
                <h3 style="font-size: 3.5vw; margin-bottom: 0.5rem;">CONVEX ANALYSIS BASICS</h3>

                <div style="display: flex; flex-direction: column; align-items: center;">
                    <img src="presentation/images/part2/main.png" style="max-width: 40%; height: auto;">
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">DEFINITION OF CONVEXITY</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.5vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> A set \(\mathcal{S} \subseteq \mathbb{R}^n\) is <b class="itext">convex</b> if for any two points in the set, 
                                the line that connects them is also in the set. Formally:
                                $$\{ u, v \in \mathcal{S} \ \rightarrow \ \forall \alpha \in [0,1], \alpha u + (1-\alpha) v \in \mathcal{S}\};$$
                            </li><br>
                            <li>For sure one of the most important concepts in geometry;</li>

                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image3.svg"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">COMPACT SETS AND STRICT CONVEXITY</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.45vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> A set \(\mathcal{S}\) is said to be  <b class="itext">closed</b> if, "essentially" (the formal definition is trickier),
                                 it contains its boundary, called \(\partial \mathcal{S}\).
                            </li><br>
                            <li> A set is said to be  <b class="itext">bounded</b> if there exists a ball of finite radius that covers it.
                           </li><br>
                           <li> A set is said to be  <b class="itext">compact</b> if it is closed and bounded.
                           </li><br>
                            <li>A closed convex set is said to be <b class="itext">strictly convex</b> if the line that connects the points is contained 
                                entirely inside the set (not in the border), with the possible exception of the initial and final points. 
                                Intuitively, this means that the object's boundary has no "flat" sides. Formally:
                                $$\{ u, v \in \mathcal{S} \ \rightarrow \ \forall \alpha \in (0,1), \alpha u + (1-\alpha) v \in \mathcal{S}-\partial \mathcal{S}\};$$
                            <br>
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image4.svg"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">MINKOWSKY SUM AND SUBTRACTIONS</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.45vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> An important operation between sets is the  <b class="itext">Minkowsky sum and subtraction:</b><br>
                                <b class="itext">$$\mathcal{A} \oplus \mathcal{B} = \{ a + b  ,  a \in \mathcal{A}  , b \in \mathcal{B}\}$$</b>
                                <b class="itext">$$\mathcal{A} \ominus \mathcal{B} = \{ a - b  ,  a \in \mathcal{A}  , b \in \mathcal{B}\}$$</b>
                            </li><br>
                            <li> The Minkowsky sum is the set of all possible pairwise sums of points in the two sets. It can also be thought 
                                as "sweeping" one set over the boundary of the other;
                           </li><br>
                           <li> Minkowsky subtraction is simply the Minkowsky sum between \(\mathcal{A}\) and the set of opposites of \(\mathcal{B}\), 
                            called \(-\mathcal{B}\). Thus, \(\mathcal{A} \ominus \mathcal{B} = \mathcal{A} \oplus (-\mathcal{B})\);
                           </li><br>
                           <li> Defined for abritrary sets, but specially important in convex sets;
                           </li><br>
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image5.svg"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">PROPERTIES OF CONVEX SETS</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.45vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> <b class="ttext">Prop 1:</b> the intersection of convex sets \(\mathcal{A} \cap \mathcal{B}\) is convex. 
                                This is not true for the union, though;<br>
                            </li><br>
                            <li> <b class="ttext">Prop 2:</b> the cartesian product \(\mathcal{A} \times \mathcal{B}\) of convex sets is convex;<br>
                            </li><br>
                            <li> <b class="ttext">Prop 3:</b> the Minkowsky sum and subtraction of convex sets is convex;<br>
                            </li><br>
                            <li> <b class="ttext">Prop 4:</b> for any point \(u\) in the boundary of the set, consider the tangent hyperplane to the set at this point. 
                                The set is contained entirely in one of the sides of the hyperplane;<br>    
                            </li><br>
                            <li> <b class="ttext">Prop 5 (Separating hyperplane theorem):</b> if two sets are convex, either they have an intersection, or 
                                there is a separating hyperplane that separates them;<br>
 
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image6.svg"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">CONVEX FUNCTIONS</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.45vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> A very useful way to handle convexity using analytic geometry is through <b class="itext">convex functions</b>;<br>
                            </li><br>
                            <li> A function \(f: \mathbb{R}^n \mapsto \mathbb{R}\) is said to be a <b class="itext">convex function</b> if 
                                <b class="itext">\(\forall u, v \in \mathbb{R}^n \ , \alpha \in [0,1]\)</b>:<br>
                                <b class="itext"> $$ f(\alpha u+(1-\alpha) v) \leq \alpha f(u) + (1-\alpha) f(v);$$</b>
                            </li><br>
                            <li> Geometrically, this means two things:
                                <ul>
                                    <li>That for any two points \((u,f(u))\) and \((v,f(v))\) in the graph, the plot of the graph is 
                                        either touching or below the straight line that connects them;</li>
                                    <li>That the <b class="itext">epigraph</b>, i.e., the \(n+1\) dimensional 
                                        set \( \mathcal{Y} = \{x \in \mathbb{R}^n , y \in \mathbb{R} \ , \ y \geq f(x)\} \),
                                        is convex;</li>
                                </ul>
                                 <br>
                            </li><br>
                            <li>Example: \(f(x)=x^2\);</li>

                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image7.svg"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">STRICTLY CONVEX FUNCTIONS</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.45vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> A function \(f: \mathbb{R}^n \mapsto \mathbb{R}\) is said to be a <b class="itext">strictly convex function</b> if 
                                <b class="itext">\(\forall u, v \in \mathbb{R}^n \ , \alpha \in (0,1)\)</b>:<br>
                                <b class="itext">$$ f(\alpha u+(1-\alpha) v) < \alpha f(u) + (1-\alpha) f(v);$$</b>
                            </li><br>
                            <li>Note the difference from before: \(\alpha\) should lie in the open interval \((0,1)\) and 
                                it should be \(<\) other than \(\leq\);</li><br>
                            <li> As you probably expected, the epigraph is now strictly convex, and the plot of the graph should 
                                be strictly below the straight line, except for the starting and end points; <br>
                            </li><br>
                            <li>Example: the function \(f(x)=x^2\) is strictly convex, but \(f(x)=|x|\) is only convex;</li>

                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image8.svg"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">PROPERTIES OF CONVEX FUNCTIONS</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.45vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> <b class="ttext">Prop 1:</b> if \(f,g: \mathbb{R}^n \mapsto \mathbb{R}\) is convex and \(A,B \geq 0\), 
                                the function \(h(x) = Af(x)+Bg(x)\) is also convex;</li><br>
                            <li> <b class="ttext">Prop 2:</b> if \(f,g: \mathbb{R}^n \mapsto \mathbb{R}\) is convex, then 
                                \(h(x) = \max(f(x),g(x))\) is convex;</li><br> 
                            <li> <b class="ttext">Prop 3:</b> all convex functions are continuous. Furthermore, if it is differentiable, 
                                the derivative is bounded;</li><br>
                            <li> <b class="ttext">Prop 4:</b>  if \(f: \mathbb{R}^n \mapsto \mathbb{R}\) is convex and \(g: \mathbb{R}^m \mapsto \mathbb{R}^n\) 
                                is an <b class="itext"> affine function \(g(y)=Ay+b\)</b>, then \(h(x)=f(g(x))\) is convex. Furthermore, if 
                                \(n=m\) and \(g\) is bijective, if \(f\) is strictly convex, so is \(h\);</li><br>            
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image7.svg"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>


            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">PROPERTIES OF CONVEX FUNCTIONS</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.4vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
 
                            <li> <b class="ttext">Prop 5:</b> <b class="itext"> if (but not only if)</b> the function \(f(x)\) is convex, the 
                                <b class="itext">sublevel sets</b> \(\mathcal{L}(c) = \{x \in \mathbb{R}^n \ | \ f(x) \leq c\}\) for a constant \(c\) are convex. Furthermore, if \(f(x)\) is strictly convex, 
                            the sets are strictly convex. The function \(f(x) = \sqrt{|x|}\) is an example to the "only if" claim;</li><br> 
                            
                            <li>
                                Thus, we can represent a convex sets as \(f(x) \leq 0\) for a convex function \(f\). 
                                Since the intersection of convex sets is also convex (see <b class="ttext">Prop 1 of convex sets</b>), a convex set can be also characterized as 
                                $$\mathcal{X} = \{x \in \mathbb{R}^n \ | \ f_i(x) \leq 0 \ i = 1,...,n\};$$</li><br> 
                            <li>    
                                This is specially useful for <b class="itext">polyhedras</b> 
                                (i.e., convex shapes with flat faces), which  can be described like this when \(f_i(x) = a_i^\top x-b_i\) are affine functions. 
                            </li>
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image9.svg"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                        <div style="width: 100%">
                            <div style="font-size: 1.2vw; text-align: center; flex-shrink: 0; margin-bottom: 0rem;">
                                Level sets of \(f(x,y) = x^2+y^4\).
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">PROPERTIES OF CONVEX FUNCTIONS</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.4vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> <b class="ttext">Prop 6:</b> convex functions have  <b class="itext"> no local maxima</b> 
                                (i.e., points \(x_{max}\) in which around every point has a smaller value );</li><br>
                            <li> <b class="ttext">Prop 7:</b>  For convex functions, all  
                                <b class="itext"> local minima</b> (i.e., points \(x_{min}\) in which around every point has a larger value), if they exist, 
                                are <b class="itext">global</b>, that is, they achieve the smallest possible value for \(f(x)\). Furthermore, 
                                the set of local (global) minima is convex;</li><br>    
                            <li> <b class="ttext">Prop 8:</b> if \(f(x)\) is strictly convex, the set of global minima is either empty 
                                or a single point;</li><br>                                
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image10.svg"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">PROPERTIES OF CONVEX FUNCTIONS</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.4vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> <b class="ttext">Prop 8:</b> if the convex function \(f\) is differentiable, then, for any points \(u,v\):
                            $$ \nabla f(u)^\top (u-v) \geq f(u)-f(v);$$
                            In one dimension, this can be rewritten as \(f(x) \geq f'(x_0)(x-x_0)+f(x_0)\), which means that the graph of 
                            \(y=f(x)\) is always above the tangent line at any point \(x_0\);
                            </li><br>
                            <li> <b class="ttext">Prop 9:</b> if \(f(x)\) is two times differentiable, it is convex <b class="itext">if and only if</b> the 
                                <b class="itext">Hessian matrix</b> \(\frac{\partial^2 f}{\partial x^2}(x)\) is a positive semidefinite 
                                matrix for all \(x\);</li><br>      
                            <li> <b class="ttext">Prop 10:</b> if \(f(x)\) is two times differentiable, it is strictly convex <b class="itext"> if (but not only if)</b> the 
                                <b class="itext">Hessian matrix</b> \(\frac{\partial^2 f}{\partial x^2}(x)\) is a positive definite 
                                matrix for all \(x\). The function \(f(x)=x^4\) is a counterexample to the "only if" claim;</li><br>                            
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image11.svg"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>


            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">CONVEX OPTIMIZATION PROBLEM</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.4vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> We saw the definition of <b class="itext">convex sets and convex functions</b>. We now define 
                               a <b class="ttext">convex optimization problem:</b>
                            $$ \min_{x \in \mathcal{X}} f(x)$$
                            in which \(f: \mathbb{R}^n \mapsto \mathbb{R}\) is a convex function, and \(\mathcal{X}\subseteq \mathbb{R}^n\) 
                            is a convex set;
                            </li><br>
                            <li> Overall, it is the easiest class of optimization problems. Generally, can be solved 
                                very efficiently;
                            </li><br>
                            <li> But why?
                            </li><br>                             
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image12.svg"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>


            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">CONVEX OPTIMIZATION PROBLEM</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.4vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> For the sake of simplicity, lets assume that \(f\) is two times differentiable, and that \(\mathcal{X}=\mathbb{R}^n\) 
                                (i.e., no constraints);
                            </li><br>
                            <li> One of the most powerful ideas on optimization (and in applied mathematics) is <b class="itext">gradient descent</b>: 
                                if you want to minimize \(f(x)\), just take steps in the opposite of the gradient \(\nabla f(x)\) starting from a point \(x[0]\):
                                $$x[k+1] = x[k] - \eta[k] \nabla f(x[k]);$$
                                For a \(\eta[k]>0\) (possibly varying with \(k\)). </li><br>  
                            <li> If the step size is chosen appropriately, the function \(f(x)\) will decrease as long as you can move, that is, \(\nabla f(x) \not= 0\);
                            </li><br>                         
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image13.gif"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">CONVEX OPTIMIZATION PROBLEM</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.4vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> There is a major issue with this approach, which is the bane of (continuous) optimization: <b class="itext">local minima</b>. In these points \(x\), \(\nabla f(x) = 0\) 
                                but the true minimum of \(f(x)\) are not achieved. Gradient descent can be trapped into one of these instead of the true 
                                <b class="itext">global minima</b>;
                            </li><br>    
                            <li>This is not a problem with convex functions because, as mentioned in <b class="ttext"> Prop 7</b> before, 
                                <b class="itext">convex functions only have global minima</b>. So, if \(\nabla f(x[k])=0\), we can 
                                be sure we have a global minimum;
                            </li>                         
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image13.gif"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">CONVEX OPTIMIZATION PROBLEM</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.4vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> What if we have constraints, i.e., \(\mathcal{X}\not= \mathbb{R}^n\);
                            </li><br>    
                            <li>Just follow the opposite of the gradient, as before.</li> <br>
                            <li> If you converge to a point inside, you reached a global minimum 
                                that is the same as the one of the unconstrained problem.</li> <br>
                                <li> If you reach the boundary of the set, project the opposite 
                                of the gradient into the boundary. Keep following it. If the projection is zero (i.e., the opposite of the gradient is parallel  
                                to the normal to the boundary that points outwards), you can be sure you have a point that is a global minimum;
                            </li> <br>
                            <li>But why can you be sure?</li>                       
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image14.gif"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>



            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">CONVEX OPTIMIZATION PROBLEM</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.2vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li>The intuitive argument (not a formal proof) follows by contradiction.</li> <br>
                            <li> Let \(x_A\) be the point in which we converged, at the boundary. The convergence criteria means that \(-\nabla f(x_A)\) 
                                is trying to "go outside" of the set to minimize even more (if we did not have constraints);
                            </li><br>
                            <li> Now, suppose that there is another point \(x_B\) in \(\mathcal{X}\) that has a smaller value: 
                                \(f(x_B) < f(x_A)\).
                            </li> <br>
                            <li>The argument is that in this case, <b class="itext">for a convex function, \(\nabla f(x_A)\) should "more or less" point in the direction from \(x_A\) to \(x_B\)</b>, which 
                                <b class="itext">can be followed since \(\mathcal{X}\) is convex</b>  (the line that connects the points is inside the set);
                                 
                            </li><br>
                            <li>This contradicts with the claim that \(-\nabla f(x_A)\) is pointing to go outside and we cannot do anything to 
                                decrease \(f(x)\);
                            </li><br>
                            <li>The formal proof requires to show that  \(\nabla f(x_A)\) should "more or less" point in the claimed direction when 
                                \(f(x)\) is convex.  This is obviously the case when \(f(x)=0.5\|x-x_B\|^2\), for example;
                            </li>
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image12.svg"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>


            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">STRICTLY CONVEX OPTIMIZATION PROBLEM</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.4vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> A convex optimization problem is said to be <b class="ttext">strictly convex</b> if \(f(x)\) is not only 
                                convex, but strictly convex (the set \(\mathcal{X}\) need not to be strictly convex\);
                            </li><br>    
                            <li>The main interest of strictly convex optimization problem is as follows:<br><br>
                                    <div style="background-color: #282828">
                                        <b class="ttext">Theorem:</b> if the set \(\mathcal{X}\) is compact, a strictly convex optimization problem 
                                            has a <b class="itext">single optimal point</b>.
                                    </div>
                            </li> <br>
                            <li>Compactness is there only to ensure that a finite optima exist (e.g., take \(\mathcal{X} = \mathbb{R}\) and consider \(\min_{x \in \mathcal{X} } e^{-x}\) )</li><br>
                            <li> This is not true for general convex problems (e.g., take \(\min_{x} \ (x_1-x_2)^2\));</li>
                            
                             
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image14.gif"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">PARAMETRIZED OPTIMIZATION PROBLEMS AND THE ENVELOPE THEOREM</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.4vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> Let \(f: \mathbb{R}^n \times \mathbb{R}^m \mapsto \mathbb{R}\) be a function \(f(x,\theta)\) that is 
                                differentiable in both arguments and \(\mathcal{X} \subseteq \mathbb{R}^n\) be a set. Define the function:
                                $$ F^*(\theta) = \min_{x \in \mathcal{X}} \ f(x,\theta); $$
                            </li>
                            <li>This is a <b class="itext">parametrized optimization problem</b>, since \(\theta\) is a parameter to the optimization problem. 
                                Note that \(F^* : \mathbb{R}^m \mapsto \mathbb{R}\). We would like to compute the gradient of \(F^*\) on \(\theta\). For this:<br><br>
                                    <div style="background-color: #282828">
                                        <b class="ttext">Theorem (Envelope Theorem):</b> the gradient \(\nabla F^*(\theta)\) exists for any \(\theta\) such that the minimizer 
                                        of the optimization problem, \(x^*(\theta)\), is unique. Furthermore:
                                        $$\nabla F^*(\theta) = \frac{\partial F^*}{\partial \theta}(x^*(\theta),\theta).$$
                                    </div>
                            </li> <br>                             
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image14.gif"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">PARAMETRIZED OPTIMIZATION PROBLEMS AND THE ENVELOPE THEOREM</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.3vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> <b class="itext">Example:</b> consider the optimization problem:
                                $$ \min_{x \in \mathcal{X}} f(x,\theta)$$
                                in which \(f(x,\theta) = \theta_1 x_1 + \theta_2x_2\) and \(\mathcal{X}\) is the circle \(x_1^2+x_2^2 \leq 1\);
                            </li>
                            <li>The optimal solution is unique: \(x_1^*(\theta) = -\theta_1/\sqrt{\theta_1^2+\theta_2^2}\), 
                                \(x_2^*(\theta) = -\theta_2/\sqrt{\theta_1^2+\theta_2^2}\), unless \(\theta_1=\theta_2=0\), in which case,
                                any \(x_1,x_2\) is optimal;
                            </li> <br>                     
                            <li>Making the substitution, \(F^*(\theta) = -\sqrt{\theta_1^2+\theta_2^2}\). Envelope theorem 
                                says that:
                                $$\nabla F^*(\theta) = \frac{\partial F^*}{\partial \theta}(x^*(\theta),\theta) = \left(\begin{array}{c} x_1^*(\theta) \\ x_2^*(\theta)
                                \end{array}\right) = \frac{-1}{\sqrt{\theta_1^2+\theta_2^2}}\left(\begin{array}{c} \theta_1 \\ \theta_2
                                \end{array}\right)$$
                                which can be checked by inspection. Note that the derivative does not exist when \(\theta_1=\theta_2=0\);
                            </li>        
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image14.gif"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">PARAMETRIZED OPTIMIZATION PROBLEMS AND THE ENVELOPE THEOREM</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.5vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li>The utility of the theorem lies on the fact that often we cannot compute \(F^*(\theta)\) analytically 
                                (as we did in the previous example). We can, however, compute \(\frac{\partial f}{\partial \theta}\) analytically 
                                and \(x^*(\theta)\) numerically, which allows us to compute the gradient;
                            </li><br>
                            <li> If \(f(x,\theta)\) is stricly convex on \(x\) for any fixed \(\theta\) and the set \(\mathcal{X}\) 
                                is convex and compact, \(F^*(\theta) = \min_{x \in \mathcal{X}} f(x,\theta)\) is differentiable for 
                                all \(\theta\), since the minimizer is unique;
                            </li><br>
                            <li>The particular use of this theorem in robotics will become clear soon;</li>
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image14.gif"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">HALF SQUARED DISTANCE AND PROJECTION</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.5vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li>Given a closed set \(\mathcal{X}\), the <b class="ttext">half-squared distance (HSD) \(E_{\mathcal{X}}(p)\)</b> between a point \(p\) and \(\mathcal{X}\) 
                            is the half-squared Euclidean distance between \(p\) and its closed point in the set \(\mathcal{X}\); </li> <br>
                            <li> This can be formulated as the optimization problem:
                                $$E_{\mathcal{X}}(p) = \min_{x \in \mathcal{X}} 0.5 \|x-p\|^2;$$
                            </li><br>
                            <li>Working with the HSD is more convenient than working with the Euclidean distance;</li><br>  
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image12.svg"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>

            <section style="display: flex; flex-direction: column; height: 100vh;">
                <h3 style="font-size: 3vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    CONVEX ANALYSIS BASICS
                </h3>
                <h3 style="font-size: 1.5vw; text-align: left; flex-shrink: 0; margin-bottom: 1rem;">
                    <b class="ttext">HALF SQUARED DISTANCE AND PROJECTION</b>
                </h3>


                <div
                    style="display: flex; flex-grow: 1; width: 90vw; max-width: 1200px; margin: auto; align-items: stretch; height: 60%;">
                    <div
                        style="flex: 1; min-width: 300px; font-size: 1.5vw; text-align: left; display: flex; align-items: start; height: 100%;">
                        <ul style="list-style-type: disc; padding-left: 1em; text-align: justify;">
                            <br>
                            <li> This problem is <b class="itext">convex</b> if \(\mathcal{X}\) is convex. Furthermore, since the function 
                                \(f(x,p) = \|x-p\|^2\) is strictly convex in \(x\) for any fixed \(p\), the solution will be unique. In that case, 
                                we define the <b class="ttext">projection operator \(\Pi_{\mathcal{X}}(p)\) </b>  as this unique minimizer;
                            </li> <br>
                            <li>If \(\mathcal{X}\) is a convex set, \(E_{\mathcal{X}}(p)\) is a convex function. If 
                                \(\mathcal{X}\) is a strictly convex set, \(E_{\mathcal{X}}(p)\) is a strictly convex function;
                            </li><br>
                            <li>The following result is a straightforward use of the Envelope theorem:<br><br>
                                    <div style="background-color: #282828">
                                        <b class="ttext">Theorem:</b> \(\ \  \nabla E_{\mathcal{X}}(p) = p - \Pi_{\mathcal{X}}(p)\)
                                    </div>
                            </li>  
                        </ul>
                    </div>

                    <div
                        style="flex: 1; min-width: 300px; display: flex; flex-direction: column; justify-content: center; align-items: start; height: 100%;">
                        <div style="width: 100%">
                            <img src="presentation/images/part2/image12.svg"
                                style="max-width: 80%; height: auto; max-height: 60vh;">
                        </div>
                    </div>
                </div>
            </section>
            <style>
                .reveal .progress {
                    color: #34eb5e;
                }

                .reveal .controls {
                    color: #34eb5e;
                }

                body {
                    background-image: url(presentation/images/aula1/logo_ufmg.svg) !important;
                    background-color: black;
                    background-size: 8% !important;
                    background-repeat: no-repeat !important;
                    background-position: 96% 3% !important;
                }

                .itext {
                    color: #8af2a2;
                }

                .ttext {
                    color: #34eb5e;
                }

                /* width */
                ::-webkit-scrollbar {
                    width: 20px;
                }

                /* Track */
                ::-webkit-scrollbar-track {
                    box-shadow: inset 0 0 5px grey;
                    border-radius: 10px;
                }

                /* Handle */
                ::-webkit-scrollbar-thumb {
                    background: #34eb5e;
                    border-radius: 10px;
                }

                /* Handle on hover */
                ::-webkit-scrollbar-thumb:hover {
                    background: #01b82b;
                }

                ::-webkit-scrollbar-corner {
                    background: rgba(0, 0, 0, 0);
                }

                .hlink {
                    color: #f5bf42;
                }

                .hlink:hover {
                    text-decoration: underline;
                }
            </style>

            <script id="MathJax-script" async
                src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js"></script>
            <script src="presentation/dist/reveal.js"></script>
            <script src="presentation/plugin/notes/notes.js"></script>
            <script src="presentation/plugin/markdown/markdown.js"></script>
            <script src="presentation/plugin/highlight/highlight.js"></script>
            <script src="presentation/plugin/menu/menu.js"></script>
            <script>
                // More info about initialization & config:
                // - https://revealjs.com/initialization/
                // - https://revealjs.com/config/
                Reveal.initialize({
                    hash: true,
                    width: 1200,
                    height: 800,
                    margin: 0,
                    minScale: 0.2,
                    maxScale: 2.0,
                    plugins: [RevealMarkdown, RevealHighlight, RevealNotes, RevealMenu]
                });
                var frames = document.getElementsByTagName("iframe");


                Reveal.on('slidechanged', event => {
                    for (let i = 0; i < frames.length; ++i) {
                        frames[i].contentWindow.location.reload(true);
                    }
                });
            </script>
</body>

</html>